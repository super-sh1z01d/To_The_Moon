# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–ø–∞–º-–¥–µ—Ç–µ–∫—Ü–∏–∏ –≤–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥

## üéØ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –û–±–Ω–æ–≤–ª–µ–Ω API (Backend)
- **–î–æ–±–∞–≤–ª–µ–Ω–∞ –º–æ–¥–µ–ª—å `SpamMetrics`** –≤ `src/app/routes/tokens.py`:
  ```python
  class SpamMetrics(BaseModel):
      spam_percentage: float
      risk_level: str
      total_instructions: int
      compute_budget_count: int
      analyzed_at: Optional[str] = None
  ```

- **–î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `spam_metrics`** –≤ `TokenItem`
- **–õ–æ–≥–∏–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Å–ø–∞–º-–¥–∞–Ω–Ω—ã—Ö** –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö –≤ API

### 2. –û–±–Ω–æ–≤–ª–µ–Ω —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
- **–î–æ–±–∞–≤–ª–µ–Ω —Ç–∏–ø `SpamMetrics`** –≤ `frontend/src/lib/api.ts`
- **–°–æ–∑–¥–∞–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `SpamCell`** –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å–ø–∞–º-–¥–∞–Ω–Ω—ã—Ö:
  - üü¢ 0-25% = –ß–∏—Å—Ç—ã–π
  - üü° 25-50% = –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–π  
  - üü† 50-70% = –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫
  - üî¥ 70%+ = –°–ø–∞–º

- **–ó–∞–º–µ–Ω–µ–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞ "–ü—É–ª—ã (USD1)"** –Ω–∞ –∫–æ–ª–æ–Ω–∫—É "–°–ø–∞–º" –≤ Dashboard

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **–î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `spam_metrics`** –≤ –º–æ–¥–µ–ª—å `TokenScore`
- **–ú–µ—Ç–æ–¥ `update_spam_metrics()`** –≤ `TokensRepository`
- **–ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤** —Å–ø–∞–º-–∞–Ω–∞–ª–∏–∑–∞

### 4. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–æ–º
- **–°–ø–∞–º-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ** –≤ –±–∞–∑—É –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∞–Ω–∞–ª–∏–∑–µ
- **API –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç** –ø–æ—Å–ª–µ–¥–Ω–∏–µ —Å–ø–∞–º-–º–µ—Ç—Ä–∏–∫–∏
- **–§—Ä–æ–Ω—Ç–µ–Ω–¥ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç** –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ó–∞–ø—É—Å–∫ —Å–ø–∞–º-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞:
```bash
# –†–∞–∑–æ–≤—ã–π –∞–Ω–∞–ª–∏–∑
python3 scripts/test_spam_monitoring.py

# –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞–∂–¥—ã–µ 5 —Å–µ–∫—É–Ω–¥
python3 scripts/run_spam_monitor_daemon.py
```

### –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞:
```bash
# –°–±–æ—Ä–∫–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ (—É–∂–µ —Å–¥–µ–ª–∞–Ω–æ)
cd frontend && npm run build && cd -

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
PYTHONPATH=. python3 -m uvicorn src.app.main:app --host 0.0.0.0 --port 8000
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–ø–∞–º-–¥–∞–Ω–Ω—ã—Ö –≤ API
python3 scripts/test_spam_api.py
```

## üìä –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤–æ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

### –ö–æ–º–ø–∞–∫—Ç–Ω—ã–π —Ä–µ–∂–∏–º:
```
üî¥ 71.4%
```

### –ü–æ–ª–Ω—ã–π —Ä–µ–∂–∏–º:
```
üî¥ 71.4%
CB: 55/85
```

### Tooltip –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
- –ü—Ä–æ—Ü–µ–Ω—Ç —Å–ø–∞–º-–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- –£—Ä–æ–≤–µ–Ω—å —Ä–∏—Å–∫–∞ (clean/low/medium/high)
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ ComputeBudget –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π
- –û–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π

## üîß –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### API Response:
```json
{
  "mint_address": "J4UBm5kvMSHeUwbNgZW4ySpCHBvS7LXknZ7rqQR9pump",
  "name": "Token Name",
  "spam_metrics": {
    "spam_percentage": 71.4,
    "risk_level": "high",
    "total_instructions": 85,
    "compute_budget_count": 55,
    "analyzed_at": "2025-10-06T19:00:42Z"
  }
}
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
```sql
-- –ü–æ–ª–µ spam_metrics –≤ —Ç–∞–±–ª–∏—Ü–µ token_scores
spam_metrics JSON NULL
```

## üé® –°—Ç–∏–ª–∏ –∏ —Ü–≤–µ—Ç–∞

- **üü¢ –ß–∏—Å—Ç—ã–π (0-25%)**: `#22c55e` (–∑–µ–ª–µ–Ω—ã–π)
- **üü° –ü–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–π (25-50%)**: `#eab308` (–∂–µ–ª—Ç—ã–π)
- **üü† –í—ã—Å–æ–∫–∏–π —Ä–∏—Å–∫ (50-70%)**: `#f97316` (–æ—Ä–∞–Ω–∂–µ–≤—ã–π)
- **üî¥ –°–ø–∞–º (70%+)**: `#ef4444` (–∫—Ä–∞—Å–Ω—ã–π)

## üìà –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä** –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ
2. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–ø–∞–º-–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** –≤ scheduler
3. **–î–æ–±–∞–≤–∏—Ç—å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É** –ø–æ —É—Ä–æ–≤–Ω—é —Å–ø–∞–º–∞
4. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Å–∫–æ—Ä–∏–Ω–≥** –∫–∞–∫ —à—Ç—Ä–∞—Ñ–Ω–æ–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é! –ö–æ–ª–æ–Ω–∫–∞ —Å–æ —Å–ø–∞–º–æ–º –∑–∞–º–µ–Ω–∏–ª–∞ "–ü—É–ª—ã (USD1)" –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ —Å–ø–∞–º-–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Ç–æ–∫–µ–Ω–æ–≤.